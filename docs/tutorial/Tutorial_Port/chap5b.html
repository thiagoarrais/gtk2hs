<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org">
  <meta http-equiv="CONTENT-TYPE" content=
  "text/html; charset=us-ascii">

  <title>Packing Using Tables</title>
</head>

<body lang="en-US" text="#000000" link="#0000FF" vlink="#840084"
bgcolor="#FFFFFF" dir="ltr">
  <table summary="links to other pages" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <th colspan="3">
        <p align="center">Gtk2Hs Tutorial</p>
      </th>
    </tr>

    <tr valign="bottom">
      <td width="10%">
        <p align="left"><a href="chap5a.html">&lt;&lt;&lt;
        Previous</a></p>
      </td>

      <td width="80%">
        <p align="center">Tables</p>
      </td>

      <td width="10%">
        <p align="right"><a href="chap6.html">Next
        &gt;&gt;&gt;</a></p>
      </td>
    </tr>
  </table>
  <hr>

  <h2><a name="SEC-PACKINGUSINGTABLES" id=
  "SEC-PACKINGUSINGTABLES"></a>Packing Using Tables</h2>

  <p>Let's take a look at another way of packing - Tables. These
  can be extremely useful in certain situations.</p>

  <p>Using tables, we create a grid that we can place widgets in.
  The widgets may take up as many spaces as we specify.</p>

  <p>The first thing to look at, of course, is the <i>tableNew</i>
  function:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableNew :: Int -&gt; Int -&gt; Bool -&gt; IO Table
</pre>
      </td>
    </tr>
  </table>

  <p>The first argument is the number of rows to make in the table,
  while the second, obviously, is the number of columns.</p>

  <p>The boolean argument (homogeneous) has to do with how the
  table's boxes are sized. If homogeneous is TRUE, the table boxes
  are resized to the size of the largest widget in the table. If
  homogeneous is FALSE, the size of a table boxes is dictated by
  the tallest widget in its same row, and the widest widget in its
  column.</p>

  <p>The rows and columns are laid out from 0 to n, where n was the
  number specified in the call to <i>tableNew</i>. So, if you
  specify rows = 2 and columns = 2, the layout would look something
  like this:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
 0          1          2
0+----------+----------+
 |          |          |
1+----------+----------+
 |          |          |
2+----------+----------+
</pre>
      </td>
    </tr>
  </table>

  <p>Note that the coordinate system starts in the upper left hand
  corner. To place a widget into a box, use the following
  function:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableAttach :: (TableClass self, WidgetClass child) =&gt; 
     self        -- self - the table
  -&gt; child   -- child - The widget to add.
  -&gt; Int      
-- leftAttach - the column number to attach the left side of a child widget to.
  -&gt; Int     
-- rightAttach - the column number to attach the right side of a child widget to.
  -&gt; Int     -- topAttach - the row number to attach the top of a child widget to.
  -&gt; Int     -- bottomAttach - the row number to attach the bottom of a child widget to.
  -&gt; [AttachOptions] 
--      xoptions - Used to specify the properties of the child widget when the table is resized.
  -&gt; [AttachOptions] 
--      yoptions - The same as xoptions, except this field determines behaviour of vertical resizing.
  -&gt; Int     
-- xpadding - An integer value specifying the padding on the left and right of the widget being added to the table.
  -&gt; Int     -- ypadding - The amount of padding above and below the child widget.
  -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>The first argument (self) is the table you've created and the
  second (child) the widget you wish to place in the table.</p>

  <p>The left and right attach arguments specify where to place the
  widget, and how many boxes to use. If you want a button in the
  lower right table entry of our 2x2 table, and want it to fill
  that entry <i>only</i>, left_attach would be = 1, right_attach =
  2, top_attach = 1, bottom_attach = 2.</p>

  <p>Now, if you wanted a widget to take up the whole top row of
  our 2x2 table, you'd use left_attach = 0, right_attach = 2,
  top_attach = 0, bottom_attach = 1.</p>

  <p>The xoptions and yoptions are used to specify packing options
  and the list may contain more than one to allow multiple
  options.</p>

  <p>These options are:</p>

  <dl>
    <dt><tt>Fill</tt></dt>

    <dd>If the table box is larger than the widget, and
    <tt>Fill</tt> is specified, the widget will expand to use all
    the room available.</dd>

    <dt><tt>Shrink</tt></dt>

    <dd>If the table widget was allocated less space then was
    requested (usually by the user resizing the window), then the
    widgets would normally just be pushed off the bottom of the
    window and disappear. If <tt>Shrink</tt> is specified, the
    widgets will shrink with the table.</dd>

    <dt><tt>Expand</tt></dt>

    <dd>This will cause the table to expand to use up any remaining
    space in the window.</dd>
  </dl>

  <p>Padding is just like in boxes, creating a clear area around
  the widget specified in pixels.</p>

  <p><i>tableAttach</i> has many options. So, there's a
  shortcut:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableAttachDefaults :: (TableClass self, WidgetClass widget) =&gt; self    
  -&gt; widget  -- widget - The child widget to add.
  -&gt; Int     
-- leftAttach - The column number to attach the left side of the child widget to.
  -&gt; Int     
-- rightAttach - The column number to attach the right side of the child widget to.
  -&gt; Int     
-- topAttach - The row number to attach the top of the child widget to.
  -&gt; Int     
-- bottomAttach - The row number to attach the bottom of the child widget to.
  -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>The values used for the <i>AttachOptions</i> are <tt>[Expand,
  Fill]</tt>, and the padding is set to 0. The rest of the
  arguments are identical to the previous function.</p>

  <p>We also have tableSetRowSpacing and tableSetColSpacing. These
  place spacing at the specified row or column.</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableSetRowSpacing :: TableClass self=&gt; self-&gt; Int -&gt; Int -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>and,</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableSetColSpacing :: TableClass self =&gt; self -&gt; Int -&gt; Int -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>The first <i>Int</i> argument is the row/column and the second
  the spacing in pixels. Note that for columns, the space goes to
  the right of the column, and for rows, the space goes below the
  row.</p>

  <p>You can also set a consistent spacing of all rows and/or
  columns with:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableSetRowSpacings :: TableClass self=&gt; self-&gt; Int -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>and,</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
tableSetColSpacings :: TableClass self =&gt; self -&gt; Int -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>Note that with these calls, the last row and last column do
  not get any spacing.</p>

  <p><br>
  <br></p>

  <h2><a name="SEC-TABLEPACKINGEXAMPLES" id=
  "SEC-TABLEPACKINGEXAMPLES"></a>Table Packing Example</h2>

  <p>Here we make a window with three buttons in a 2x2 table. The
  first two buttons will be placed in the upper row. A third, quit
  button, is placed in the lower row, spanning both columns. Which
  means it should look something like this:</p>

  <p><img src="Images/GtkChap5b.png" align="bottom" alt=
  "Table Packing"></p>

  <p>Here's the source code:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
import Graphics.UI.Gtk

main :: IO ()
main = do
   initGUI
   window &lt;- windowNew
   set window [windowTitle := "Table", containerBorderWidth := 20,
               windowDefaultWidth := 150, windowDefaultHeight := 100 ]
   table &lt;- tableNew 2 2 True
   containerAdd window table
   button1 &lt;- buttonNewWithLabel "On"
   onClicked button1 (buttonSwitch button1)
   tableAttachDefaults table button1 0 1 0 1
   button2 &lt;- buttonNewWithLabel "Off"
   onClicked button2 (buttonSwitch button2)
   tableAttachDefaults table button2 1 2 0 1
   button3 &lt;- buttonNewWithLabel "Quit"
   onClicked button3 mainQuit
   tableAttachDefaults table button3 0 2 1 2
   onDestroy window mainQuit  
   widgetShowAll window
   mainGUI

buttonSwitch :: Button -&gt; IO ()
buttonSwitch b = do
         txt &lt;- buttonGetLabel b
         let newtxt = case txt of
                              "Off" -&gt; "On"
                              "On"  -&gt; "Off"
         buttonSetLabel b newtxt 
</pre>
      </td>
    </tr>
  </table>
  <hr>

  <p>The <i>buttonSwitch</i> function is attached to both buttons
  in the top row. The <i>buttonGetLabel</i> function is an example
  of how to get an attribute from a widget using a standard method.
  There is also a more general alternative <i>get</i> (analogous to
  <i>set</i>) which takes a widget and an attribute. In the above
  example this should be:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="0" bgcolor="#E0E0E0">
    <col width="256*">

    <tr>
      <td width="100%">
        <p>txt &lt;- get b buttonLabel</p>
      </td>
    </tr>
  </table>

  <p>with the same result.</p>

  <table summary="links to other pages" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr valign="top">
      <td width="33%">
        <p align="left"><a href="chap5a.html">&lt;&lt;&lt;
        Previous</a></p>
      </td>

      <td width="34%">
        <p align="center"><a href="chap1.html">Home</a></p>
      </td>

      <td width="33%">
        <p align="right"><a href="chap6.html">Next
        &gt;&gt;&gt;</a></p>
      </td>
    </tr>

    <tr valign="top">
      <td width="33%">
        <p align="left">Packing Demonstration</p>
      </td>

      <td width="33%">
        <p align="right">Button Widget</p>
      </td>
    </tr>
  </table>

  <p><br>
  <br></p>
</body>
</html>
