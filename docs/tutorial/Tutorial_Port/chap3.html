<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org">
  <meta http-equiv="CONTENT-TYPE" content=
  "text/html; charset=us-ascii">

  <title>Getting Started</title>
</head>

<body lang="en-US" text="#000000" link="#0000FF" vlink="#840084"
bgcolor="#FFFFFF" dir="ltr">
  <table summary="links to other pages" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <th colspan="3">
        <p align="center">Gtk2Hs Tutorial</p>
      </th>
    </tr>

    <tr valign="bottom">
      <td width="10%">
        <p align="left"><a href=
        "chap1.html">&lt;&lt;&lt;Previous</a></p>
      </td>

      <td width="80%"></td>

      <td width="10%">
        <p align="right"><a href="chap4.html">Next
        &gt;&gt;&gt;</a></p>
      </td>
    </tr>
  </table>
  <hr>

  <h3><a name="CH-GETTINGSTARTED" id=
  "CH-GETTINGSTARTED"></a>Getting Started</h3>

  <p>The first thing to do, of course, is download Gtk2Hs and
  install it. You can always get the latest version from <a href=
  "http://haskell.org/gtk2hs/">http://haskell.org/gtk2hs/</a> and
  several Linux versions have their own Gtk2Hs packages. For
  Windows there is an installer available.</p>

  <p>The next thing is to open the Gtk2Hs API reference
  documentation for your version. You will need to use this
  extensively to be able to find the names for widgets, methods,
  attributes and signals you might want to use. The <i>contents</i>
  list all modules and there is also an <i>index</i>. Inside each
  module description there is also a class hierarchy. If a method,
  attribute or signal you expect is missing, it might belong to one
  of the superclasses of which your widget type is an instance.</p>

  <p>To begin our introduction to Gk2Hs, we'll start with the
  simplest program possible. This program will create a 200x200
  pixel window and has no way of exiting except to be killed by
  using the shell.</p>

  <p><img src="./Images/GtkChap3a.png" align="bottom" alt=
  "GtkChap3a"></p>

  <table summary="haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
import Graphics.UI.Gtk

main :: IO ()
main = do
  initGUI
  window &lt;- windowNew
  widgetShowAll window
  mainGUI
</pre>
      </td>
    </tr>
  </table>

  <p>You can compile the above program with the Glasgow Haskell
  Compiler (GHC) using:</p>

  <p><tt>ghc --make GtkChap3a.hs -o Chap3a</tt></p>

  <p>assuming GtkChap3a.hs is the filename. Alternatively you can
  use the interactive GHCi, for earlier and later versions of
  Gtk2Hs. (Because of threading problems intermediate versions will
  not work interactively. Gtk2Hs does not work with Hugs.)</p>

  <p>The first line imports the Gtk2Hs graphics library.</p>

  <p>All Gtk2Hs programs run in main and the first line:</p>

  <table summary="haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
  initGUI
</pre>
      </td>
    </tr>
  </table>

  <p>is called in all Gk2Hs applications. The next two lines of
  code create and display a window.</p>

  <table summary="haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
  window &lt;- windowNew
  widgetShowAll window
</pre>
      </td>
    </tr>
  </table>

  <p>Rather than create a window of 0x0 size, a window without
  children is set to 200x200 by default so you can still manipulate
  it. Widgets that can be visible (not all can) may be shown or
  hidden using their own methods, but the second line works on a
  widget (here the window) and all its children.</p>

  <p>The last line enters the Gtk2Hs main processing loop.</p>

  <table summary="haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
  mainGUI
</pre>
      </td>
    </tr>
  </table>

  <p>mainGUI is another call you will see in every Gtk2Hs
  application. When control reaches this point, Gtk2Hs will sleep
  waiting for X events (such as button or key presses), timeouts,
  or file IO notifications to occur. In our simple example,
  however, events are ignored.</p>

  <h3><a name="SEC-HELLOWORLD" id="SEC-HELLOWORLD"></a>Hello World
  in Gtk2Hs</h3>

  <p>Now for a program with a widget (a button). It's the classic
  hello world &agrave; la Gtk2Hs.</p>

  <p><img src="./Images/GtkChap3b.png" name="graphics2" align=
  "bottom" alt="GtkChap3b" id="graphics2"></p>

  <p>If the button is clicked it will display the text <i>Hello
  World</i>. This is implemented in the Haskell function
  <i>hello</i> with a button <i>b</i> as its argument. The type
  declaration actually states the type variable <i>o</i> is an
  instance of class <i>ButtonClass</i>. Gtk2Hs extensively uses
  Haskell classes to map the object hierarchy of the original Gtk
  widgets. Each widget in Gtk2Hs, of course, has a Haskell
  type.</p>

  <p>Widgets, and the classes their types belong to, usually have
  attributes. These can be set either by named methods or by the
  general <i>set</i> function, which uses a list-like notation as
  shown below. Of special interest here is the
  <i>containerChild</i> attribute of the window (actually a
  superclass of the window) which states the relationship with the
  button. Because of this <i>widgetShowAll window</i> will also
  make the button visible.</p>

  <p>Widgets are connected to other widgets in a graphical
  dependency tree (not to be confused with the class hierarchy).
  Gtk2hs also works with the Glade visual interface designer and,
  if you use Glade, such connections are visible in the <i>Widget
      tree</i> window. There is a <a href=
  "http://haskell.org/gtk2hs/docs/tutorial/glade/">separate
  introductory tutorial</a> on how to use Glade with Gtk2Hs.</p>

  <table summary="haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
import Graphics.UI.Gtk

hello :: (ButtonClass o) =&gt; o -&gt; IO ()
hello b = set b [buttonLabel := "Hello World"]

main :: IO ()
main = do
  initGUI
  window &lt;- windowNew
  button &lt;- buttonNew
  set window [windowDefaultWidth := 200, windowDefaultHeight := 200,
              containerChild := button , containerBorderWidth := 10 ]
  onClicked button (hello button)
  onDestroy window mainQuit
  widgetShowAll window
  mainGUI
</pre>
      </td>
    </tr>
  </table>
  <hr>

  <p>Gtk2Hs is event driven. The mainGUI function will sleep until
  something happens, like a mouse being clicked, a window being
  destroyed or something else typical for a widget. Such events
  then trigger signals which in turn trigger user defined functions
  to be evaluated. In this case the <i>onClicked</i> signal,
  emitted by the user clicking the button, is linked to the text
  being displayed on the same button. When the user destroys the
  window, unlike as with the first program, <i>main</i> now exits
  cleanly.</p>

  <p><br>
  <br></p>

  <table summary="links to other pages" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr valign="top">
      <td width="33%">
        <p align="left"><a href="chap1.html">&lt;&lt;&lt;
        Previous</a></p>
      </td>

      <td width="34%">
        <p align="center"><a href="chap1.html">Home</a></p>
      </td>

      <td width="33%">
        <p align="right"><a href="chap4.html">Next
        &gt;&gt;&gt;</a></p>
      </td>
    </tr>

    <tr valign="top">
      <td width="33%">
        <p align="left">Contents</p>
      </td>

      <td width="34%">
        <p align="center">&nbsp;</p>
      </td>

      <td width="33%">
        <p align="right">Packing Widgets</p>
      </td>
    </tr>
  </table>

  <p><br>
  <br></p>
</body>
</html>
