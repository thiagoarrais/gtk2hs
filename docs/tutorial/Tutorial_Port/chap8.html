<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<html>
<head>
  <meta name="generator" content=
  "HTML Tidy for Linux/x86 (vers 11 February 2007), see www.w3.org">
  <meta http-equiv="CONTENT-TYPE" content=
  "text/html; charset=us-ascii">

  <title>Labels</title>
</head>

<body lang="en-US" text="#000000" link="#0000FF" vlink="#840084"
bgcolor="#FFFFFF" dir="ltr">
  <table summary="links to other pages" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr>
      <th colspan="3">
        <p align="center">Gtk2Hs Tutorial</p>
      </th>
    </tr>

    <tr valign="bottom">
      <td width="10%">
        <p align="left"><a href="chap7.html">&lt;&lt;&lt;
        Previous</a></p>
      </td>

      <td width="80%"></td>

      <td width="10%">
        <p align="right"><a href="chap9.html">Next
        &gt;&gt;&gt;</a></p>
      </td>
    </tr>
  </table>
  <hr>

  <h2><a name="SEC-LABELS" id="SEC-LABELS"></a>Labels</h2>

  <p>Labels are used a lot in Gtk2Hs, and are relatively simple.
  Labels emit no signals as they do not have an associated X
  window. If you need to catch signals, or do clipping, place it
  inside an <i>EventBox</i> widget, which allows you to catch
  signals for widgets which do not have their own window, or a
  button.</p>

  <p>To create a new label, use:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
labelNew :: Maybe String -&gt; IO Label

labelNewWithMnemonic :: String -&gt; IO Label
</pre>
      </td>
    </tr>
  </table>

  <p>With the second function, if characters in the string are
  preceded by an underscore, they are underlined. If you need a
  literal underscore character in a label, use '__' (two
  underscores). The first underlined character represents a
  keyboard accelerator called a mnemonic. When that key is pressed
  the activable widget which contains the label (e.g. a button)
  will be activated. The widget which is to be affected can also be
  set by <i>labelSetMnemonicWidget</i>.</p>

  <p>To change the label's text after creation, or to get the
  label's text, use the functions:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
labelSetText :: LabelClass self =&gt; self -&gt; String -&gt; IO ()

labelGetLabel :: LabelClass self =&gt; self -&gt; IO String
</pre>
      </td>
    </tr>
  </table>

  <p>or, of course, the generic <i>set</i> or <i>get</i> functions.
  The space needed for the new string will be automatically
  adjusted if needed. You can produce multi-line labels by putting
  line breaks in the label string. If you have multi-line labels
  the lines can be justified relatively to each other using:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="0" bgcolor="#E0E0E0">
    <col width="256*">

    <tr>
      <td width="100%">
        <pre>
labelSetJustify :: LabelClass self =&gt; self -&gt; Justification -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>where the type <i>Justification</i> has one of four
  constructors:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
JustifyLeft
JustifyRight
JustifyCenter
JustifyFill
</pre>
      </td>
    </tr>
  </table>

  <p>The label widget is also capable of line wrapping the text
  automatically. This can be activated using:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
labelSetLineWrap :: LabelClass self =&gt; self -&gt; Bool -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>If you want your label underlined, then you can set a pattern
  on the label:</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
labelSetPattern :: LabelClass self =&gt; self -&gt; [Int] -&gt; IO ()
</pre>
      </td>
    </tr>
  </table>

  <p>The list of Ints marks the underlined parts of the label text
  alternated by the non-interlined parts. For example, [3,1,3]
  means first 3 characters underlined, the next not, the next 3
  underlined.</p>

  <p>You can also make text in a lable selectable, so the user can
  copy and paste it, and use some formatting options.</p>

  <p align="left">Below is a short example to illustrate a few of
  these functions. It makes use of the <i>Frame</i> widget to
  better demonstrate the label styles. A <i>Frame</i> is just an
  ornament like a <i>HSeparator</i> and a <i>VSeparator</i> but it
  surrounds the widget and is an instance of <i>Container</i>.
  Therefore the widget it frames must be added to it with
  <i>containerAdd</i>. A frame itself can have a label to convey
  information about its contents.</p>
  <p><img src="./Images/GtkChap8.png" name="graphics2" align=
  "bottom" alt="GtkChap8" id="graphics2"></p>

  <p>Because all the labels are framed, a function
  <i>myLabelWithFrameNew</i> is defined, which returns a
  tuple.Gtk2Hs is truly Haskell, so you can use all the Haskell
  data types and features. The justifications are pretty obvious,
  but they only refer to the lines inside the label. So, to to
  right justify label2 itself, you need <i>miscSetAlignment</i> as
  shown below. The last two widgets in the left horizontal box are
  packed with <i>boxPackEnd</i> instead of the usual
  <i>boxPackStart</i>. The button label demonstrates the use of a
  mnemonic as an accellarator key. Pressing Alt_C on the keyboard
  has the same effect as clicking the button.</p>

  <p>Note: when tested on Fedora 6, pressing Enter or the space bar
  also had this effect. Also note the effect of the y-character on
  the placement of the underline.</p>

  <table summary="Haskell code" width="100%" border="0"
  cellpadding="2" cellspacing="2" bgcolor="#E0E0E0">
    <tr>
      <td>
        <pre>
import Graphics.UI.Gtk

main:: IO ()
main = do
     initGUI
     window &lt;- windowNew
     set window [windowTitle := "Labels", containerBorderWidth := 10 ]
     mainbox &lt;- vBoxNew False 10
     containerAdd window mainbox 
     hbox &lt;- hBoxNew True 5
     boxPackStart mainbox hbox PackNatural 0
     vbox1 &lt;- vBoxNew False 10
     vbox2 &lt;- vBoxNew False 0
     boxPackStart hbox vbox1 PackNatural 0 
     boxPackStart hbox vbox2 PackNatural 0

     (label1,frame1) &lt;- myLabelWithFrameNew
     boxPackStart vbox1 frame1 PackNatural 0
     labelSetText label1 "Penny Harter"

     (label2,frame2) &lt;- myLabelWithFrameNew
     boxPackStart vbox1 frame2 PackNatural 0
     labelSetText label2 "broken bowl\nthe pieces\nstill rocking"
     miscSetAlignment label2 0.0 0.0
     hsep1 &lt;- hSeparatorNew
     boxPackStart vbox1 hsep1 PackNatural 10

     (label3,frame3) &lt;- myLabelWithFrameNew
     boxPackStart vbox1 frame3 PackNatural 0
     labelSetText label3 "Gary Snyder"

     (label4,frame4) &lt;- myLabelWithFrameNew
     boxPackStart vbox1 frame4 PackNatural 0
     labelSetText label4 "After weeks of watching the roof leak\nI fixed it tonight\nby moving a single board"
     labelSetJustify label4 JustifyCenter

     (label5,frame5) &lt;- myLabelWithFrameNew
     boxPackStart vbox2 frame5 PackNatural 0
     labelSetText label5 "Kobayashi Issa"
    
     (label7,frame7) &lt;- myLabelWithFrameNew
     boxPackEnd vbox2 frame7 PackNatural 0
     labelSetText label7 "only one guy and\nonly one fly trying to\nmake the guest room do"
     labelSetJustify label7 JustifyRight

     (label6,frame6) &lt;- myLabelWithFrameNew
     boxPackEnd vbox2 frame6 PackNatural 10
     labelSetText label6 "One Guy"
     frameSetLabel frame6 "Title:"
     labelSetPattern label6 [3,1,3]

     button &lt;- buttonNew
     boxPackEnd mainbox button PackNatural 20
     buttonlabel &lt;- labelNewWithMnemonic "Haiku _Clicked"
     containerAdd button buttonlabel

     widgetShowAll window
     onClicked button (putStrLn "button clicked...")
     onDestroy window mainQuit
     mainGUI


myLabelWithFrameNew :: IO (Label,Frame)
myLabelWithFrameNew = do
           label &lt;- labelNew Nothing
           frame &lt;- frameNew
           containerAdd frame label
           frameSetShadowType frame ShadowOut
           return (label, frame)
-- Haikus quoted from X.J. Kennedy, Dana Gioia, Introduction to Poetry, Longman, 1997
</pre>
      </td>
    </tr>
  </table>
  <hr>

  <table summary="links to other pages" width="100%" border="0"
  cellpadding="0" cellspacing="0">
    <tr valign="top">
      <td width="33%">
        <p align="left"><a href="chap7.html">&lt;&lt;&lt;
        Previous</a></p>
      </td>

      <td width="34%">
        <p align="center"><a href="chap1.html">Home</a></p>
      </td><!--
                <TD WIDTH=33%>
                        <P ALIGN=RIGHT><A HREF="chap9.html">Next &gt;&gt;&gt;</A></P>
                </TD 
                -->
    </tr>

    <tr valign="top">
      <td width="33%">
        <p align="left">Adjustments, Scale and Range</p>
      </td>

      <td width="34%">
        <p align="center">&nbsp;</p>
      </td>

      <td width="33%">
        <p align="right">to be continued...</p>
      </td>
    </tr>
  </table>

  <p><br>
  <br></p>
</body>
</html>
